$(function(){return window.Background={internal:{_document:$(document),_window:$(window),_body:$("body")},tick:function(options){var animation_style,change,constructor,document_height,params,regExp_image_url,regExp_url,window_height,_ref;params=this.internal;constructor={data:"",horizontal:"center",duration:"1s",easeType:"ease-out",callback:function(){}};if(arguments.length)if(typeof options==="string"||options.backgrounds)options={data:arguments[0],horizontal:arguments[1],duration:arguments[2],easeType:arguments[3],
callback:arguments[4]};options=$.extend(constructor,options);change=function(value){var day,end,moment,now,start,this_moment,_i,_len,_ref,_ref1;if(typeof value==="string")value=$.parseJSON(value);day=value.backgrounds;now=new Date;for(_i=0,_len=day.length;_i<_len;_i++){moment=day[_i];start=moment.started_at.split(":");end=moment.ended_at.split(":");if(start[0]===end[0])if(now.getHours()===parseInt(start[0])&&(start[1]<=(_ref=now.getMinutes())&&_ref<=end[1]))true;else continue;else if(parseInt(start[0])<
(_ref1=now.getHours())&&_ref1<parseInt(end[0]))true;else if(now.getHours()===parseInt(start[0])&&now.getMinutes()>=parseInt(start[1]))true;else if(now.getHours()===parseInt(end[0])&&now.getMinutes()<=parseInt(end[1]))true;else continue;this_moment=moment}if(this_moment){if(this_moment.image)params._body.css("background-image","url("+this_moment.image+")");if(this_moment.color)return params._body.css("background-color",this_moment.color)}};regExp_image_url=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?(?:\.(jpg|jpeg|bmp|png|gif|psd|eps|pif|psf|cdr|tga|pcd|mpt))$/i;
regExp_url=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;if(typeof options.data==="string")if(regExp_image_url.test(options.data))params._body.css("background-image","url("+options.data+")");else if(regExp_url.test(options.data))$.ajax({url:options.data,data:{},success:function(value){return change(value)}});else{if(options.data)change(options.data)}else if(options.data)change(options.data);animation_style="background-position "+options.duration+
" "+options.easeType;params._body.css({"transition":animation_style,"moz-transition":animation_style,"-webkit-transition":animation_style,"-o-transition":animation_style,"-ms-transition":animation_style});_ref=[params._document.height(),params._window.height()],document_height=_ref[0],window_height=_ref[1];params._body.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend",function(event){return options.callback()});params._window.on("resize",function(event){return window_height=$(this).height()});
return params._window.on("scroll",function(event){var image_scroll,scroll_height;document_height=document_height===params._document.height()?document_height:params._document.height();scroll_height=params._document.scrollTop();image_scroll=scroll_height/(document_height-window_height)*(100).toFixed(7);return params._body.css("background-position",options.horizontal+(" "+image_scroll+"%"))})}}});